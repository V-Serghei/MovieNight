
@{
    ViewBag.Title = "Compose";
}
@model MovieNight.Web.Models.Mail.InboxModel
<div>
    <div class="content">

        <!-- Start Content-->
        <div class="container-fluid">

            <!-- start page title -->
            <div class="row">
                <div class="col-12">
                    <div class="page-title-box">
                        <div class="page-title-right">
                            <ol class="breadcrumb m-0">
                                <li class="breadcrumb-item"><a href="javascript: void(0);">Movie Night</a></li>
                                <li class="breadcrumb-item"><a href="javascript: void(0);">Email</a></li>
                                <li class="breadcrumb-item active">Email Compose</li>
                            </ol>
                        </div>
                        <h4 class="page-title text-warning font-weight-bold">Email Compose</h4>
                    </div>
                </div>
            </div>
            <!-- end page title -->
            <!-- Right Sidebar -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="card-box">
                        <!-- Left sidebar -->
                        <div class="inbox-leftbar">
                            <div class="mail-list mt-4">
                                <a href=@Url.Action("Starred","DataTransfer") class="list-group-item border-0 text-warning font-weight-bold"><i class="mdi mdi-star font-18 align-middle mr-2"></i>Starred</a>
                                <a href=@Url.Action("SentMail","DataTransfer") class="list-group-item border-0"><i class="mdi mdi-send font-18 align-middle mr-2"></i>Sent Mail</a>
                            </div>
                            
                            <div class="list-group b-0 mail-list">
                            </div>

                        </div>
                        <!-- End Left sidebar -->

                        <div class="inbox-rightbar">
                            <div class="mt-4">
                                @using (Html.BeginForm("ComposeAdd", "DataTransfer", FormMethod.Post ))
                                {
                                    @Html.AntiForgeryToken()

                                    <div class="form-group">
                                        @Html.LabelFor(m => m.RecipientName)
                                        @Html.TextBoxFor(m => m.RecipientName, new { @class = "form-control", placeholder = "To" })
                                        @Html.ValidationMessageFor(m => m.RecipientName)
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(m => m.Theme)
                                        @Html.TextBoxFor(m => m.Theme, new { @class = "form-control", placeholder = "Enter Title" })
                                        @Html.ValidationMessageFor(m => m.Theme)
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(m => m.Message)
                                        @Html.TextAreaFor(m => m.Message, new { @class = "form-control", rows = "4", placeholder = "Write something..." })
                                        @Html.ValidationMessageFor(m => m.Message)
                                    </div>

                                    <button type="submit" name="submit" class="btn btn-primary waves-effect waves-light">
                                        <span>Send</span> <i class="mdi mdi-send ml-2"></i>
                                    </button>
                                }
                            </div> <!-- end card-->

                        </div>
                        <!-- end inbox-rightbar-->

                        <div class="clearfix"></div>
                    </div>

                </div> <!-- end Col -->

            </div><!-- End row -->

        </div> <!-- container -->

    </div> <!-- content -->
    
</div>

<script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.5.1.min.js"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $('#registrationForm').submit(function(e) {
            e.preventDefault();
            var formData = $(this).serialize();
            console.log(formData);

            $.ajax({
                type: 'POST',
                url: '@Url.Action("ComposeAdd", "DataTransfer")',
                data: formData,
                success: function(response) {
                    if (response.redirect) {

                        window.location.href = response.redirect;
                    } else if (!response.success) {

                        $('.alert-danger').html(response.statusMsg).show();
                    }
                },
                error: function() {
                    $('.alert-danger').html('An error occurred while executing the request. Please try again.').show();
                }
            });
        });
    });
</script>


