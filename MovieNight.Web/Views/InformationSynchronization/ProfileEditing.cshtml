
@{
    ViewBag.Title = "ProfileEditing";
}
@using System.Activities.Statements
@using MovieNight.Web.Infrastructure
@model MovieNight.Web.Models.PersonalP.PersonalProfileModel
@{
    var logInData = HttpContext.Current.GetMySessionObject();
}

<div>
    <div class="content">

        <!-- Start Content-->
        @if ((logInData == null))
        {
            <div class="account-pages mt-5 mb-5">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-md-8 col-lg-6 col-xl-5">
                            <div class="card">

                                <div class="card-body p-4">


                                    <div class="text-center w-75 m-auto">
                                        <a href=@Url.Action("Primary","MainPage")>
                                            <span><img src="~/images/logo_text.png" alt="" height="44"></span>
                                        </a>
                                    </div>
                                    <div class="text-center">
                                        <div class="mt-4">
                                            <div class="logout-checkmark">


                                            </div>
                                        </div>

                                        <h3>Oops, you don’t seem to have the right to be here!</h3>

                                        <p class="text-muted"> To view this page, you must first log in. </p>
                                        <div class="text-center w-75 m-auto">
                                            <a href="@Url.Action("Login","Identification")">
                                                <button type="button" class="btn btn-outline-primary waves-effect waves-light">

                                                    LOG IN
                                                </button>
                                            </a>


                                        </div>
                                    </div>

                                </div> <!-- end card-body -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        }
        else
        {
            <div class="container-fluid">

                <!-- start page title -->
                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box">
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">Movie Night</a></li>
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">Profile</a></li>
                                </ol>
                            </div>
                            <h4 class="page-title">Profile editing</h4>
                        </div>
                    </div>
                </div>
                <!-- end page title -->

                <div class="">
                    

                    <div >
                        <div class="card-box">
                           

                            


                        <div class="tab-pane" id="settings">
                        
                 @using (Html.BeginForm("ProfileEdit", "InformationSynchronization", FormMethod.Post,new { enctype = "multipart/form-data" }))
                 {
                     if (Model is not { MsgResp: null })
                     {
                         <div class="alert alert-danger">
                            
                                 <p>@Model.MsgResp</p>
                             
                         </div>
                     }
                <h5 class="mb-3 text-uppercase bg-light p-2"><i class="mdi mdi-account-circle mr-1"></i> Personal Info</h5>
                <div class="form-group">
                    <label for="Username">Username</label>
                    @if (Model.BUserE.Username == null)
                    {
                        <input type="text" name="Username" class="form-control" id="Username" placeholder="Enter Username" value="">
                    }
                    else
                    {
                        <input type="text" name="Username" class="form-control" id="Username" placeholder="@Model.BUserE.Username" value="@Model.BUserE.Username">
                    }
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                           @if (Model.FirstName != null)
                           {
                               
                               <label for="firstname">First Username</label>
                               <input type="text" class="form-control" id="firstname" placeholder="Enter first name" name="FirstName" value="@Model.FirstName">
                           }
                           else
                           {
                               <label for="firstname">First Username</label>
                               <input type="text" class="form-control" id="firstname" placeholder="Enter first name" name="FirstName" value="">
                           }
                           
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @if (Model.LastName == null)
                            {
                                <label for="lastname">Last Username</label>
                                <input type="text" class="form-control" id="lastname" placeholder="Enter last name" name="LastName" value="">
                            }
                            else
                            {
                                <label for="lastname">Last Username</label>
                                <input type="text" class="form-control" id="lastname" placeholder="Enter last name" name="LastName" value="@Model.LastName">
                            }
                            
                        </div>
                    </div> <!-- end col -->
                </div> <!-- end row -->

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                             @if (Model.AboutMe == null)
                                {
                                    <label for="AboutMe">AboutMe</label>
                                    <textarea class="form-control" id="AboutMe" rows="4"  placeholder="Write something..." name="AboutMe" ></textarea>
                                }
                                else
                                {
                                    <label for="AboutMe">AboutMe</label>
                                    <textarea class="form-control" id="AboutMe" rows="4" placeholder="Write something..." name="AboutMe">@Model.AboutMe</textarea>

                                }
                            
                        </div>
                    </div> <!-- end col -->
                </div> <!-- end row -->

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            @if(logInData.Email!=null)
                            {
                            <label for="Email">Email Address</label>
                            <input type="email" class="form-control" id="Email" placeholder="Enter email" name="Email" value="@logInData.Email" readonly="readonly">
                            <span class="form-text text-muted"><small>If you want to change email please <a href="javascript: void(0);">click</a> here.</small></span>
                            }
                            else
                            {
                            <label for="Email">Email Address</label>
                            <input type="email" class="form-control" id="Email" placeholder="Enter email" name="Email" value="Error" readonly="readonly">
                            <span class="form-text text-muted"><small>If you want to change email please <a href="javascript: void(0);">click</a> here.</small></span>
                            }
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @if(Model.BUserE is { Password: not null }){<label for="Password">Password</label>
                            <input type="password" class="form-control" id="Password" placeholder="Enter password" name="Password" value="@Model.BUserE.Password" readonly="readonly">
                            <span class="form-text text-muted"><small>If you want to change password please <a href="javascript: void(0);">click</a> here.</small></span>}
                            else
                            {
                                <label for="Password">Password</label>
                                <input type="password" class="form-control" id="Password" placeholder="Enter password" name="Password" value="Error" readonly="readonly">
                                <span class="form-text text-muted"><small>If you want to change password please <a href="javascript: void(0);">click</a> here.</small></span>
                            }
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @if(Model.Gender!=null)
                            {
                                <label for="Gender">Gender</label>
                                <select class="form-control" id="Gender" name="Gender" required>
                                    <option value="non" @(Model.Gender == "non" ? "selected" : "")>Non</option>
                                    <option value="male" @(Model.Gender == "male" ? "selected" : "")>man</option>
                                    <option value="female" @(Model.Gender == "female" ? "selected" : "")>woman</option>
                                    <option value="other" @(Model.Gender == "other" ? "selected" : "")>another</option>
                                </select>
                            
                            }
                            else
                            {
                                <label for="Gender">Gender</label>
                                <select class="form-control" id="Gender" name="Gender" required>
                                    <option value="non">Non</option>
                                    <option value="male">man</option>
                                    <option value="female">woman</option>
                                    <option value="other">another</option>
                                </select>
                            }
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <div class="form-group">
                            
                            @if (Model.Avatar != null)
                            {
                                <label for="AvatarFile"> Upload avatar</label>

                                <input type="file" class="form-control" id="AvatarFile" name="AvatarFile" accept="image/*">
                            }
                            else
                            {
                                <label for="AvatarFile"> Upload avatar</label>

                                <input type="file" class="form-control" id="AvatarFile" name="AvatarFile" accept="image/*">
                            }
                            

                        </div>
                    </div>

                </div> <!-- end row -->

                <div class="form-group row">
                    @if (Model.DataBirth != default(DateTime) && Model.DataBirth!= new DateTime(1753, 1, 1))
                    {
                        <label class="col-sm-2 col-form-label" for="example-date">Date of birth</label>
                        <div class="col-sm-10">
                            <input class="form-control" type="date" name="DataBirth" id="example-date" value="@Model.DataBirth.ToString("yyyy-MM-dd")">
                        </div>
                    }
                    else 

                    {
                        <label class="col-sm-2 col-form-label" for="example-date">Date of birth</label>
                        <div class="col-sm-10">
                            <input class="form-control" type="date" name="DataBirth" id="example-date">
                        </div>
                    }
                   
                </div>

                <h5 class="mb-3 text-uppercase bg-light p-2"><i class="mdi mdi-office-building mr-1"></i> Additional information</h5>
                <div class="form-group">
                    @if (Model.PhoneNumber != null)
                    {<label for="phone_number">US Telephone</label>
                    <input type="tel" id="phone_number" class="form-control"
                           maxlength="15"
                           pattern="^\+(\d{3}\) \d{3}-\d{4}$"
                           name="PhoneNumber" value="@Model.PhoneNumber">
                    <span class="font-13 text-muted">e.g. (123) 456-7890</span>
                    
                    }
                    else
                    {
                        <label for="phone_number">US Telephone</label>
                        <input type="tel" id="phone_number" class="form-control"
                               maxlength="15"
                               pattern="^\+(\d{3}\) \d{3}-\d{4}$"
                               name="PhoneNumber">
                        <span class="font-13 text-muted">e.g. (123) 456-7890</span>
                    
                    }
                </div>
                
                <script>
                    const phoneNumberInput = document.getElementById('phone_number');
    
                    phoneNumberInput.addEventListener('input', function() {
                      const formattedNumber = phoneNumberInput.value.replace(/\D/g, '');
                      phoneNumberInput.value = formattedNumber.replace(/(\d{3})(\d{3})(\d{5})/, '+($1) $2-$3');
                    });
                </script>



                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            @if (Model.Quote != null)
                            {
                                <label for="Quote">Quote</label>
                                <input type="text" class="form-control" id="Quote" placeholder="Enter your Quote" name="Quote" value="@Model.Quote">
                            }
                            else
                            {
                                <label for="Quote">Quote</label>
                                <input type="text" class="form-control" id="Quote" placeholder="Enter your Quote" name="Quote" >
                            }
                            
                        </div>
                    </div>
                    <div class="col-md-6">
                        
                        <div class="form-group">
                          @if (Model.Country != null)
                          {
                              <label for="country">Country:</label>
                              <select id="country" name="Country" class="form-control">
                                  <option value="">Select the country...</option>
                                  <option value="Russia" @(Model.Country == "Russia" ? "selected" : "")>Russia</option>
                                  <option value="Ukraine" @(Model.Country == "Ukraine" ? "selected" : "")>Ukraine</option>
                                  <option value="Belarus" @(Model.Country == "Belarus" ? "selected" : "")>Belarus</option>
                                  <option value="Moldova" @(Model.Country == "Moldova" ? "selected" : "")>Moldova</option>
                                  <option value="UNITED STATES" @(Model.Country == "UNITED STATES" ? "selected" : "")>UNITED STATES</option>
                                  <option value="Britain" @(Model.Country == "Britain" ? "selected" : "")>Britain</option>
                                  <option value="OTHER" @(Model.Country == "OTHER" ? "selected" : "")>Other (Please Specify)</option>
                                  <input type="text" id="otherCountryInput" name="Country" class="form-control" style="display: none;" placeholder="Enter your country">
                              </select>
                          }
                            else
                            {
                                <label for="country">Country:</label>
                                <select id="country" name="Country" class="form-control">

                                    <option value="">Select the country...</option>
                                    <option value="Russia">Russia</option>
                                    <option value="Ukraine">Ukraine</option>
                                    <option value="Belarus">Belarus</option>
                                    <option value="Moldova">Moldova</option>
                                    <option value="UNITED STATES">UNITED STATES</option>
                                    <option value="Britain">Britain</option>
                                    <option value="OTHER">Other (Please Specify)</option>
                                    <input type="text" id="otherCountryInput" name="Country" class="form-control" style="display: none;" placeholder="Enter your country">

                                </select>
                            }
                            <script>
                                document.getElementById("country").addEventListener("change", function () {
                                    var countrySelect = document.getElementById("country");
                                    var otherInput = document.getElementById("otherCountryInput");
    
                                    if (countrySelect.value === "OTHER") {
                                        otherInput.style.display = "block";
                                    } else {
                                        otherInput.style.display = "none";
                                    }
                                });

                            </script>
                        </div>

                       
                    </div>

                </div> <!-- end row -->
                <br/>
                <br/>
                <div class="row">
                    <h4 class="header-title">Your data will be displayed on your page for everyone. If you want to hide something, specify it below</h4>

                    <div class="col-md-6">
                        <div class="mt-3">
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="customCheck1" name="YPICOBSBYF">
                                <label class="custom-control-label" for="customCheck1" name="YPICOBSBYF">Your personal information can only be seen by your friends</label>
                            </div>
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="customCheck2" name="SEOBIAY">
                                <label class="custom-control-label" for="customCheck2" name="SEOBIAY">Show everyone only basic information about you</label>
                            </div>

                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mt-3">
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="customCheck3" name="HYBH">
                                <label class="custom-control-label" for="customCheck3" name="HYBH">Hide your browsing history</label>
                            </div>
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="customCheck4" name="HMG">
                                <label class="custom-control-label" for="customCheck4" name="HMG">Hide my grades</label>
                            </div>

                        </div>
                    </div>
                </div>
                <br/>
                <br/>

                <h5 class="mb-3 text-uppercase bg-light p-2"><i class="mdi mdi-earth mr-1"></i> Social</h5>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="social-fb">Facebook</label>
                            <div class="input-group">
                               
                                @if (Model.Facebook!= null)
                                {
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fab fa-facebook-square"></i></span>
                                    </div>
                                    <input type="text" class="form-control" id="social-fb" placeholder="Url" name="Facebook" value="@Model.Facebook">

                                }
                                else
                                {
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fab fa-facebook-square"></i></span>
                                    </div>
                                    <input type="text" class="form-control" id="social-fb" placeholder="Url" name="Facebook">

                                }
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="social-tw">Twitter</label>
                            <div class="input-group">
                               
                                @if (Model.Twitter != null)
                                {
                                    <input type="text" class="form-control" id="social-tw" placeholder="Username" name="Twitter" value="@Model.Twitter">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fab fa-twitter"></i></span>
                                    </div>
                                }
                                else
                                {
                                    
                                    <input type="text" class="form-control" id="social-tw" placeholder="Username" name="Twitter">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fab fa-twitter"></i></span>
                                    </div>

                                }
                            </div>
                        </div>
                    </div> <!-- end col -->

                </div> <!-- end row -->

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="social-instagram">Instagram</label>
                            <div class="input-group">
                               
                                @if (Model.Instagram != null)
                                {
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fab fa-instagram"></i></span>
                                    </div>
                                    <input type="text" class="form-control" id="social-instagram" placeholder="Url" name="Instagram" value="@Model.Instagram"> 
                                   
                                }
                                else
                                {
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fab fa-instagram"></i></span>
                                    </div>
                                    <input type="text" class="form-control" id="social-instagram" placeholder="Url" name="Instagram">
                                   
                                }
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="social-github">GitHab</label>
                            <div class="input-group">
                                
                                @if (Model.GitHab != null)
                                {
                                   
                                    <input type="text" class="form-control" id="social-github" placeholder="Url" name="GitHab" value="@Model.GitHab">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fab fa-github"></i></span>
                                    </div>
                                }
                                else
                                {
                                   
                                    <input type="text" class="form-control" id="social-github" placeholder="username" name="GitHab">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="fab fa-github"></i></span>
                                    </div>
                                }
                            </div>
                        </div>
                    </div> <!-- end col -->
                </div> <!-- end row -->


                <div class="text-right">
                    <button type="submit" name="submit" class="btn btn-success waves-effect waves-light mt-2"><i class="mdi mdi-content-save"></i> Save</button>
                </div>
            }
            </div>
                                <!-- end settings content-->
                            </div>
                        </div> <!-- end tab-content -->
                    </div> <!-- end card-box-->

                </div> <!-- end col -->
          
        }
    </div> <!-- container -->
    
</div> <!-- content -->
